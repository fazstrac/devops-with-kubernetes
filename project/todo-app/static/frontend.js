"use strict";(()=>{async function f(){return(await fetch("/todos")).json()}async function E(e){return(await fetch("/todos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:e})})).json()}function h(e=document){let r=e.getElementById("todo-input"),l=e.getElementById("todo-send"),u=e.getElementById("char-counter"),p=e.getElementById("todo-list");if(!r||!l||!u||!p){console.warn("todo frontend: missing required DOM elements");return}let o=r,d=l,c=u,m=p,i=140;async function y(){try{(await f()).forEach(n=>{let s=document.createElement("li");s.textContent=n.description,m.appendChild(s)})}catch(t){console.error("Failed to load todos:",t)}}y();function a(){let t=o.value.length;c.textContent=`${t} / ${i}`,t>i?(c.style.color="red",d.disabled=!0):(c.style.color="#666",d.disabled=!1)}o.addEventListener("input",a),a(),d.addEventListener("click",async()=>{let t=o.value.trim();if(t){if(t.length>i){alert(`Todo too long (max ${i} chars).`);return}try{let n=await E(t),s=document.createElement("li");s.textContent=n.description,m.appendChild(s),o.value="",a()}catch(n){console.error("Failed to add todo:",n)}o.focus()}}),o.addEventListener("keydown",t=>{t.key==="Enter"&&(t.preventDefault(),d.click())})}typeof window!="undefined"&&document.getElementById("todo-input")&&h();})();
