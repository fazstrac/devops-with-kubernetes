"use strict";(()=>{async function E(){return(await fetch("/todos")).json()}async function p(o){return(await fetch("/todos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:o})})).json()}(()=>{let o=document.getElementById("todo-input"),c=document.getElementById("todo-send"),a=document.getElementById("char-counter"),u=document.getElementById("todo-list");if(!o||!c||!a||!u){console.warn("todo frontend: missing required DOM elements");return}let e=o,d=c,i=a,m=u,r=140;async function f(){try{(await E()).forEach(n=>{let s=document.createElement("li");s.textContent=n.description,m.appendChild(s)})}catch(t){console.error("Failed to load todos:",t)}}f();function l(){let t=e.value.length;i.textContent=`${t} / ${r}`,t>r?(i.style.color="red",d.disabled=!0):(i.style.color="#666",d.disabled=!1)}e.addEventListener("input",l),l(),d.addEventListener("click",async()=>{let t=e.value.trim();if(t){if(t.length>r){alert(`Todo too long (max ${r} chars).`);return}try{let n=await p(t),s=document.createElement("li");s.textContent=n.description,m.appendChild(s),e.value="",l()}catch(n){console.error("Failed to add todo:",n)}e.focus()}}),e.addEventListener("keydown",t=>{t.key==="Enter"&&(t.preventDefault(),d.click())})})();})();
