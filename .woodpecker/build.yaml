when:
  - event: push
    branch: main

steps:
  - name: containerize
    image: woodpeckerci/plugin-kaniko
    settings:
      repo: https://git.fudwin.xyz:8443/sami/devops-with-kubernetes
      dockerfile: log_output/Containerfile
      context: log_output
      tag: ${CI_COMMIT_SHA}
      dry-run: false
      build_args:
      - COMMIT_SHA=${CI_COMMIT_SHA}
      - COMMIT_AUTHOR_EMAIL=${CI_COMMIT_AUTHOR_EMAIL}
  - name: check
    image: alpine:latest
    commands:
      - docker image ls